{"version":3,"file":"static/js/998.6f0ed3a0.chunk.js","mappings":"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","sources":["components/AddTodo/AddTodoBlock.tsx","components/AddTodo/AddTodoModal.styled.jsx","helpers/formatDate.ts","components/AddTodo/AddTodoModal.tsx","components/TodoCard/TodoCard.tsx","components/TodoList/TodoList.tsx","hooks/useShowModal.ts","pages/AllTodosPage.tsx"],"sourcesContent":["import { FC } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../redux/selectors\";\nimport { Link } from \"react-router-dom\";\nimport { useShowModal } from \"../../hooks/useShowModal\";\nimport { AddTodoModal } from \"./AddTodoModal\";\n\nexport const AddTodoBlock: FC = () => {\n  const { id } = useSelector(selectUser);\n  const { isShowModal, openModal, closeModal } = useShowModal();\n\n  return (\n    <>\n      {!id && <Link to=\"/auth\">Please Sign in to create tasks</Link>}\n\n      <button type=\"button\" onClick={openModal} disabled={!id}>\n        Add new task\n      </button>\n\n      {isShowModal && <AddTodoModal closeModal={closeModal} />}\n    </>\n  );\n};\n","import { fadeInScale } from \"../../assets/styles/GlobalStyles\";\nimport styled from \"styled-components\";\n\nexport const ModalContainer = styled.div`\n  width: 90%;\n  max-height: 90vh;\n  border-radius: 20px;\n  overflow-y: scroll;\n  scroll-behavior: smooth;\n  padding: 12px;\n  background-color: #ffffff;\n  animation: ${fadeInScale} 700ms ease-in-out;\n`;\n\nexport const Backdrop = styled.div`\n  z-index: 1200;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: var(--backdrop);\n`;\n","export const formatDate = (deadline: Date | undefined): string => {\n  if (!deadline) return \"\";\n  const day = deadline.getDate().toString().padStart(2, \"0\");\n  const month = (deadline.getMonth() + 1).toString().padStart(2, \"0\");\n  const year = deadline.getFullYear().toString();\n  const formattedDate = `${day}/${month}/${year}`;\n  return formattedDate;\n};\n\nexport const formatDateToObject = (\n  deadline: string | undefined\n): Date | undefined => {\n  if (deadline === \"\" || !deadline) return undefined;\n  const [day, month, year] = deadline.split(\"/\");\n  const dateObject = new Date(Number(year), Number(month) - 1, Number(day));\n  return dateObject;\n};\n","import { FC, SyntheticEvent, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { Backdrop } from \"./AddTodoModal.styled\";\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as yup from \"yup\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUser } from \"../../redux/selectors\";\nimport { nanoid } from \"@reduxjs/toolkit\";\nimport ReactDatePicker from \"react-datepicker\";\nimport { AppDispatch } from \"../../redux/store\";\nimport { addTodo, editTodo } from \"../../redux/operations\";\nimport { formatDate, formatDateToObject } from \"../../helpers/formatDate\";\n\nconst modalRoot = document.querySelector(\"#modal-root\") as HTMLElement;\n\nexport interface TodoDataOut {\n  title: string;\n  text: string;\n  deadline: Date | undefined;\n}\n\ninterface AddTodoModalProps {\n  closeModal: () => void;\n  isEdit?: boolean;\n  todoId?: string;\n  title?: string;\n  text?: string;\n  deadline?: string;\n}\n\nconst validationSchema = yup.object().shape({\n  title: yup\n    .string()\n    .min(3)\n    .max(100)\n    .required(\"A Title for new task is required\"),\n  deadline: yup.date().required(\"A deadline is required\"),\n  text: yup.string().max(500),\n});\n\nexport const AddTodoModal: FC<AddTodoModalProps> = ({\n  closeModal,\n  isEdit = false,\n  todoId,\n  title,\n  text,\n  deadline,\n}) => {\n  const dispatch: AppDispatch = useDispatch();\n  const { id: userId } = useSelector(selectUser);\n\n  const handleBackdropClose = (e: SyntheticEvent) => {\n    if (e.target === e.currentTarget) {\n      closeModal();\n    }\n  };\n\n  useEffect(() => {\n    const handleCloseByEsc = (e: KeyboardEvent) => {\n      if (e.code === \"Escape\") {\n        closeModal();\n      }\n    };\n    window.addEventListener(\"keydown\", handleCloseByEsc);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleCloseByEsc);\n    };\n  }, [closeModal]);\n\n  const handleSubmit = async (todoData: TodoDataOut) => {\n    const todoPayload = {\n      userId,\n      todo: {\n        ...todoData,\n        deadline: formatDate(todoData.deadline),\n        completed: false,\n        id: isEdit ? (todoId as string) : nanoid(),\n      },\n    };\n\n    isEdit ? dispatch(editTodo(todoPayload)) : dispatch(addTodo(todoPayload));\n\n    closeModal();\n  };\n\n  const initialValues: TodoDataOut = {\n    title: isEdit ? (title as string) : \"\",\n    text: isEdit ? (text as string) : \"\",\n    deadline: isEdit ? formatDateToObject(deadline) : undefined,\n  };\n\n  return createPortal(\n    <Backdrop onClick={handleBackdropClose}>\n      <button\n        type=\"button\"\n        aria-label=\"close modal window\"\n        onClick={closeModal}\n      >\n        x\n      </button>\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={handleSubmit}\n      >\n        {({ setFieldValue, values }) => (\n          <Form>\n            <Field type=\"text\" name=\"title\" placeholder=\"Title\" required />\n            <Field type=\"text\" name=\"text\" placeholder=\"Description\" />\n            <ReactDatePicker\n              name=\"deadline\"\n              placeholderText=\"Deadline\"\n              selected={values.deadline}\n              onChange={(date) => setFieldValue(\"deadline\", date)}\n              autoComplete=\"off\"\n              dateFormat=\"dd/MM/yyyy\"\n              calendarStartDay={1}\n              required\n            />\n\n            <button type=\"submit\">\n              {isEdit ? \"Edit task\" : \"Create new task\"}\n            </button>\n\n            <ErrorMessage name=\"title\" component=\"div\" />\n            <ErrorMessage name=\"text\" component=\"div\" />\n            <ErrorMessage name=\"deadline\" component=\"div\" />\n          </Form>\n        )}\n      </Formik>\n    </Backdrop>,\n    modalRoot\n  );\n};\n","import { FC, useEffect, useState } from \"react\";\nimport { TodoData } from \"../../redux/slices/todosSlice\";\nimport { useShowModal } from \"../../hooks/useShowModal\";\nimport { AddTodoModal } from \"../AddTodo/AddTodoModal\";\nimport {\n  MdOutlineCheckBox,\n  MdOutlineCheckBoxOutlineBlank,\n} from \"react-icons/md\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch } from \"../../redux/store\";\nimport { deleteTodo, editTodoStatus } from \"../../redux/operations\";\nimport { selectUser } from \"../../redux/selectors\";\n\nexport const TodoCard: FC<TodoData> = ({\n  id,\n  title,\n  text,\n  deadline,\n  completed,\n}) => {\n  const { isShowModal, openModal, closeModal } = useShowModal();\n  const [isCompleted, setIsCompleted] = useState(completed);\n  const { id: userId } = useSelector(selectUser);\n  const dispatch: AppDispatch = useDispatch();\n\n  const handleComplete = () => {\n    setIsCompleted((prev) => !prev);\n  };\n\n  const handleDelete = () => {\n    dispatch(deleteTodo({ id, userId }));\n  };\n\n  useEffect(() => {\n    dispatch(editTodoStatus({ todo: { id, completed: isCompleted }, userId }));\n  }, [dispatch, isCompleted, id, userId]);\n\n  return (\n    <>\n      <li>\n        <h6>{title}</h6>\n        <p>{text}</p>\n        <p>{deadline}</p>\n        <p>{isCompleted ? \"completed\" : \"active\"}</p>\n        <button\n          type=\"button\"\n          aria-label=\"toggle complete task\"\n          onClick={handleComplete}\n        >\n          {isCompleted ? (\n            <MdOutlineCheckBox />\n          ) : (\n            <MdOutlineCheckBoxOutlineBlank />\n          )}\n        </button>\n        <button type=\"button\" onClick={openModal}>\n          Edit task\n        </button>\n        <button type=\"button\" onClick={handleDelete}>\n          Delete task\n        </button>\n      </li>\n\n      {isShowModal && (\n        <AddTodoModal\n          closeModal={closeModal}\n          isEdit\n          todoId={id}\n          title={title}\n          text={text}\n          deadline={deadline}\n        />\n      )}\n    </>\n  );\n};\n","import { FC } from \"react\";\nimport { TodoData } from \"../../redux/slices/todosSlice\";\nimport { TodoCard } from \"../TodoCard/TodoCard\";\n\ninterface ListProps {\n  todos: TodoData[];\n}\n\nexport const TodoList: FC<ListProps> = ({ todos }) => {\n  return (\n    <ul>\n      {todos.map(({ id, title, text, deadline, completed }) => (\n        <TodoCard\n          key={id}\n          id={id}\n          title={title}\n          text={text}\n          deadline={deadline}\n          completed={completed}\n        />\n      ))}\n    </ul>\n  );\n};\n","import { useState } from \"react\";\n\nexport const useShowModal = () => {\n  const [isShowModal, setIsShowModal] = useState(false);\n\n  const openModal: () => void = () => {\n    setIsShowModal(true);\n    document.body.style.overflow = \"hidden\";\n  };\n\n  const closeModal: () => void = () => {\n    setIsShowModal(false);\n    document.body.style.overflow = \"\";\n  };\n\n  return { isShowModal, openModal, closeModal };\n};\n","import \"react-datepicker/dist/react-datepicker.css\";\nimport { FC, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectTodos, selectUser } from \"../redux/selectors\";\nimport { fetchTodos } from \"../redux/operations\";\nimport { AppDispatch } from \"../redux/store\";\nimport { TodoList } from \"../components/TodoList/TodoList\";\nimport { AddTodoBlock } from \"../components/AddTodo/AddTodoBlock\";\n\nconst AllTodosPage: FC = () => {\n  const { id } = useSelector(selectUser);\n  const todos = useSelector(selectTodos);\n  const dispatch: AppDispatch = useDispatch();\n\n  useEffect(() => {\n    if (id) {\n      dispatch(fetchTodos(id));\n    }\n  }, [dispatch, id]);\n\n  return (\n    <>\n      <AddTodoBlock />\n\n      {!todos.length ? (\n        <p>You have no tasks yet</p>\n      ) : (\n        <>\n          <h2>Here are all of your tasks:</h2>\n          <TodoList todos={todos} />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default AllTodosPage;\n"],"names":["AddTodoBlock","id","useSelector","selectUser","isShowModal","openModal","closeModal","useShowModal","_jsxs","_Fragment","children","_jsx","Link","to","type","onClick","disabled","AddTodoModal","styled","div","_templateObject","_taggedTemplateLiteral","fadeInScale","Backdrop","_templateObject2","formatDate","deadline","day","getDate","toString","padStart","month","getMonth","year","getFullYear","concat","formatDateToObject","split","Date","Number","modalRoot","document","querySelector","validationSchema","yup","shape","title","min","max","required","text","_ref","isEdit","todoId","dispatch","useDispatch","userId","useEffect","handleCloseByEsc","e","code","window","addEventListener","removeEventListener","initialValues","undefined","createPortal","target","currentTarget","Formik","onSubmit","async","todoPayload","todo","todoData","completed","nanoid","editTodo","addTodo","_ref2","setFieldValue","values","Form","Field","name","placeholder","ReactDatePicker","placeholderText","selected","onChange","date","autoComplete","dateFormat","calendarStartDay","ErrorMessage","component","TodoCard","isCompleted","setIsCompleted","useState","editTodoStatus","handleComplete","prev","MdOutlineCheckBox","MdOutlineCheckBoxOutlineBlank","handleDelete","deleteTodo","TodoList","todos","map","setIsShowModal","body","style","overflow","AllTodosPage","selectTodos","fetchTodos","length"],"sourceRoot":""}